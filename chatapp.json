{
  "_id": "chatapp",
  "committed_update_seq": 0,
  "compact_running": false,
  "data_size": 0,
  "db_name": "chat",
  "disk_format_version": 6,
  "disk_size": 79,
  "doc_count": 0,
  "doc_del_count": 0,
  "instance_start_time": "1481465493721645",
  "purge_seq": 0,
  "update_seq": 0,
  "_attachments": {
    "css/messages.css": {
      "content_type": "text/css",
      "data": "LyogQ1NTICovCgpodG1sLCBib2R5IHsKCWZvbnQtc2l6ZTogMjFweDsKCWZvbnQtZmFtaWx5OiBVYnVudHUsIEFyaWFsLCBzYW5zOwogIG1hcmdpbjowOwogIHBhZGRpbmc6IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsKfQoKaDEgewoJCn0KCm1haW4gewogIHdpZHRoOiA4NSU7CiAgbWFyZ2luOiBhdXRvOwogIG1hcmdpbi10b3A6IDMwcHg7CiAgcGFkZGluZzogMjBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOwogIGJveC1zaGFkb3c6IDBweCAwcHggNXB4IGJsYWNrOwp9CgoubWVzc2FnZXMgewoJaGVpZ2h0OiA3MDBweDsKCW92ZXJmbG93OiBhdXRvOwp9CgoubWVzc2FnZSB7CiAgd2lkdGg6IDk1JTsKICBtYXJnaW46YXV0bzsKICBtYXJnaW4tYm90dG9tOiAxMHB4OwogIHBhZGRpbmc6IDVweDsKICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogIHRyYW5zaXRpb246IC4yNXM7Cn0KCi5tZXNzYWdlOmhvdmVyIHsKICBib3JkZXI6IDFweCBzb2xpZCAjNTU1Owp9CgoubWVzc2FnZV9fYXV0aG9yIHsKICBmb250LXNpemU6IC44ZW07CiAgZm9udC1zdHlsZTpvYmxpcXVlOwp9CgoubWVzc2FnZV9fZGVsZXRlIHsKCWNvbG9yOiBpbmhlcml0OwoJdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CgoubWVzc2FnZV9fbGlrZSB7Cgljb2xvcjogaW5oZXJpdDsKCXRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoKLm5ld21zZyB7CglkaXNwbGF5OmZsZXg7Cgl3aWR0aDogMTAwJTsKfQoKLm5ld21zZ19faW5wdXQgewoJZmxleDogNDsKCWJvcmRlci1yYWRpdXM6IDBweDsKCWJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOwoJYm9yZGVyLXJpZ2h0OiAwOwoJbWFyZ2luOiAwOwoJYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMTBweDsKCWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDEwcHg7CgloZWlnaHQ6IDEuNWVtOwoJbGluZS1oZWlnaHQ6IDEuNWVtOwoJcGFkZGluZy1sZWZ0OiAxNXB4OwoJZm9udC1zaXplOiAxLjVlbTsKCW1pbi13aWR0aDogMDsKfQoubmV3bXNnX19pbnB1dDpmb2N1cyB7Cglib3gtc2hhZG93OiAwIDAgMnB4IGJsdWU7Cn0KCi5uZXdtc2dfX2J1dHRvbiB7CglmbGV4OiAxOwoJYm9yZGVyLXJhZGl1czogMHB4OwoJYm9yZGVyOiAxcHggc29saWQgYmxhY2s7CgltYXJnaW46IDA7Cglib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMTBweDsKCWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAxMHB4Owp9Cgoub3B0aW9ucyB7CiAgbWFyZ2luLXRvcDogMHB4OwogIHdpZHRoOiAxMDAlOwogIHRleHQtYWxpZ246IHJpZ2h0Owp9Ci5vcHRpb25zID4gYSB7CiAgZm9udC1zaXplOiAuN2VtOwp9Ci5vcHRpb25zID4gZm9ybSB7CiAgICBtYXJnaW4tdG9wOiAyMHB4Owp9CgoKCgoubG9hZGluZyB7Cglwb3NpdGlvbjogZml4ZWQ7Cgl0b3A6MDsKCWxlZnQ6MDsKCXBhZGRpbmc6IDUwcHg7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwoJd2lkdGg6IDEwMCU7CgloZWlnaHQ6IDEwMCU7Cglmb250LXNpemU6IDVlbTsKCXRleHQtYWxpZ246IGNlbnRlcjsKCWFuaW1hdGlvbi1kZWxheTogMXM7CglhbmltYXRpb24tZHVyYXRpb246IDEuNXM7CiAgYW5pbWF0aW9uLW5hbWU6IGJsaW5rOwogIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlOwogIGFuaW1hdGlvbi1kaXJlY3Rpb246IGFsdGVybmF0ZTsKfQpAa2V5ZnJhbWVzIGJsaW5rIHsKICBmcm9tIHtjb2xvcjogIzAwMDt9CiAgdG8geyBjb2xvcjogIzk5OTsgfQp9Cg=="
    },
    "index.html": {
      "content_type": "text/html",
      "data": "PCFET0NUWVBFIGh0bWw+CjxodG1sPgoJPGhlYWQ+CgkJPG1ldGEgY2hhcnNldD0idXRmOCIvPgoJCTx0aXRsZT5Hb29kQ2hhdDwvdGl0bGU+CgkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJjc3MvbWVzc2FnZXMuY3NzIi8+Cgk8L2hlYWQ+CgkKCTxib2R5PgoJCTxoMT5Hb29kQ2hhdDwvaDE+CgkJPG1haW4gaWQ9ImFwcCI+CgkKCQkJPHNlY3Rpb24gY2xhc3M9Im1lc3NhZ2VzIj4KCQkJCTxhcnRpY2xlIHYtZm9yPSJtZXNzYWdlIGluIG1lc3NhZ2VzIiBjbGFzcz0ibWVzc2FnZSI+CgkJCQkJPGRpdiBjbGFzcz0ibWVzc2FnZV9fdGV4dCI+e3ttZXNzYWdlLnRleHR9fTwvZGl2PgoJCQkJCTxkaXYgY2xhc3M9Im1lc3NhZ2VfX21ldGEiPgoJCQkJCQk8c3BhbiBjbGFzcz0ibWVzc2FnZV9fYXV0aG9yIj57e21lc3NhZ2UuYXV0aG9yfX08L3NwYW4+CgkJCQkJCTxhIGhyZWY9IiNzZWxmIgoJCQkJCQkJIGNsYXNzPSJtZXNzYWdlX19kZWxldGUiCgkJCQkJCQkgdi1vbjpjbGljay5wcmV2ZW50PSJkZWxldGVNZXNzYWdlKG1lc3NhZ2UpIgoJCQkJCQkJIHRpdGxlPSJEZWxldGUgdGhpcyBtZXNzYWdlIj7wn5eRPC9hPgoJCQkKCQkJCQkJPGEgaHJlZj0iI3NlbGYiCgkJCQkJCQkgY2xhc3M9Im1lc3NhZ2VfX2xpa2UiCgkJCQkJCQkgdi1vbjpjbGljay5wcmV2ZW50PSJsaWtlTWVzc2FnZShtZXNzYWdlKSIKCQkJCQkJCSB0aXRsZT0iTGlrZSB0aGlzIG1lc3NhZ2UiPgoJCQkJCQkJCfCfkY0KCQkJCQkJCTxpCgkJCQkJCQkJCXYtaWY9Im1lc3NhZ2UubGlrZWRCeS5sZW5ndGggPiAwIgoJCQkJCQkJCQl2LWJpbmQ6dGl0bGU9IidMaWtlZCBieTogJyArIG1lc3NhZ2UubGlrZWRCeS5qb2luKCcsICcpIj4KCQkJCQkJCQkoe3ttZXNzYWdlLmxpa2VkQnkubGVuZ3RofX0pCgkJCQkJCQk8L2k+CgkJCQkJCTwvYT4KCQkJCQk8L2Rpdj4KCQkJCTwvYXJ0aWNsZT4KCQkJPC9zZWN0aW9uPgoJCQkKCQkJPGRpdiB2LWlmPSJtZXNzYWdlcy5sZW5ndGggPT09IDAiPgoJCQkJTm8gbWVzc2FnZXMKCQkJPC9kaXY+CgkJCQoJCQk8ZGl2PgoJCQkJPGZvcm0gdi1vbjpzdWJtaXQucHJldmVudD0ic2VuZCIgY2xhc3M9Im5ld21zZyI+CgkJCQkJPGlucHV0IHR5cGU9InRleHQiIHYtbW9kZWw9ImN1cnJlbnRfdGV4dCIgcGxhY2Vob2xkZXI9Ik5ldyBtZXNzYWdlLi4uIiBhdXRvZm9jdXM9InRydWUiIGNsYXNzPSJuZXdtc2dfX2lucHV0Ii8+CgkJCQkJPGlucHV0IHR5cGU9InN1Ym1pdCIgdi1iaW5kOmRpc2FibGVkPSJjdXJyZW50X3RleHQubGVuZ3RoID09PSAwIiB2YWx1ZT0iU2VuZCIgY2xhc3M9Im5ld21zZ19fYnV0dG9uIi8+CgkJCQk8L2Zvcm0+CgkJCQkKCQkJCTxkaXYgY2xhc3M9Im9wdGlvbnMiPgoJCQkJCTxhIGhyZWY9IiNzZWxmIiB2LW9uOmNsaWNrLnByZXZlbnQ9InNob3dfb3B0aW9ucyA9ICFzaG93X29wdGlvbnMiPk9wdGlvbnM8L2E+CgkJCQkJPGZvcm0gdi1zaG93PSJzaG93X29wdGlvbnMiIHYtb246c3VibWl0LnN0b3AucHJldmVudD0ic2hvd19vcHRpb25zID0gZmFsc2UiPgoJCQkJCQlVc2VybmFtZTogPGlucHV0IHYtb246aW5wdXQ9InNldFVzZXJOYW1lIiB2LWJpbmQ6dmFsdWU9ImdldFVzZXJOYW1lKCkiIHBsYWNlaG9sZGVyPSJOYW1lIi8+CgkJCQkJPC9mb3JtPgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoJCQkKCQkJIDxkaXYgY2xhc3M9ImxvYWRpbmciIHYtaWY9ImZhbHNlIj4KCQkJCTwhLS1EaXNwbGF5cyBvbmx5IHdoaWxlIHZ1ZSBpcyBsb2FkaW5nLS0+CgkJCQlMb2FkaW5nLi4uCgkJCTwvZGl2PgoJCTwvbWFpbj4KCQkKCQk8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2cvdnVlQDIuMS40LHBvdWNoZGJANi4wLjciPjwvc2NyaXB0PgoJCTxzY3JpcHQgc3JjPSJqcy9hcHAuanMiPjwvc2NyaXB0PgoJPC9ib2R5Pgo8L2h0bWw+"
    },
    "js/app.js": {
      "content_type": "text/javascript",
      "data": "LyogSlMgKi8KCi8vIFBvdWNoREIuZGVidWcuZW5hYmxlKCcqJyk7CmNsYXNzIERCIGV4dGVuZHMgUG91Y2hEQiB7Cgljb25zdHJ1Y3RvcigpIHsKCQljb25zdCBuYW1lID0gImNoYXQiCgkJc3VwZXIobmFtZSk7CgkJdGhpcy5uYW1lID0gbmFtZTsKCQl0aGlzLnJlbW90ZSA9ICdodHRwOi8vbG9jYWxob3N0OjU5ODQvY2hhdCc7Cgl9CgkKCXN5bmMoKSB7CglQb3VjaERCLnN5bmModGhpcy5uYW1lLCB0aGlzLnJlbW90ZSwge2xpdmU6IHRydWUsIHJldHJ5OiB0cnVlfSk7Cgl9Cn0KCmNsYXNzIE1lc3NhZ2UgewoJY29uc3RydWN0b3Ioe2RhdGUsIGF1dGhvciwgdGV4dCwgbGlrZWRCeSwgX3JldiwgX2lkfSkgewoJCXZhciBkYXRlX29iaiA9IG5ldyBEYXRlKGRhdGUpOwoJCXRoaXMudHlwZSA9ICJtZXNzYWdlIjsKCQl0aGlzLmRhdGUgPSBkYXRlX29iajsKCQl0aGlzLmF1dGhvciA9IGF1dGhvciB8fCAiQW5vbnltb3VzIjsKCQl0aGlzLnRleHQgPSB0ZXh0OwoJCQoJCS8vIFByaXZhdGUgcHJvcGVydHkgdGhpcy5fbGlrZWRCeQoJCWNvbnN0IGxpa2VkQnlTZXQgPSBuZXcgU2V0KGxpa2VkQnkgfHwgW10pOwoJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX2xpa2VkQnknLCB7dmFsdWU6IGxpa2VkQnlTZXR9KTsKCQkKCQl0aGlzLl9pZCA9ICdtZXNzYWdlJCcgKyB0aGlzLmRhdGUudG9JU09TdHJpbmcoKSArICckJyArIHRoaXMuYXV0aG9yOwoJCWlmIChfaWQgIT09IHRoaXMuX2lkKSBjb25zb2xlLmVycm9yKCJNZXNzYWdlIGNyZWF0ZWQgd2l0aCBpbnZhbGlkIGRhdGEiKTsKCQl0aGlzLl9yZXYgPSBfcmV2OwoJfQoKCS8qKgoJKiBBZGQgdGhlIGdpdmVuIHVzZXIgdG8gdGhlIHBlb3BsZSB3aG8gbGlrZSB0aGlzIG1lc3NhZ2UKCSoqLwoJbGlrZSh1c2VybmFtZSkgewoJCWlmICghdXNlcm5hbWUpIHRocm93IG5ldyBFcnJvcigiWW91IG11c3QgYmUgbG9nZ2VkIGluIHRvIGxpa2UgbWVzc2FnZXMiKTsKCSAgdGhpcy5fbGlrZWRCeS5hZGQodXNlcm5hbWUpOwoJfQoKICAvKioKCSogR2V0IHRoZSBudW1iZXIgb2YgbGlrZXMgb2YgdGhlIG1lc3NhZ2UKCSoqLwoJZ2V0IGxpa2VzKCl7CgkJcmV0dXJuIHRoaXMuX2xpa2VkQnkuc2l6ZTsKCX0KCiAgLyoqCgkqIENvbnZlcnRzIHRvIGEgc2ltcGxlIEpTT04gZG9jdW1lbnQgdG8gdXNlIGluIHRoZSBkYXRhYmFzZQoJKi8KCXRvSlNPTigpIHsKCQlyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcywgewoJCQknZGF0ZSc6IHRoaXMuZGF0ZS50b0lTT1N0cmluZygpLAoJCQknbGlrZWRCeSc6IEFycmF5LmZyb20odGhpcy5fbGlrZWRCeSkKCQl9KTsKICB9CgoJCgkvKioKCSogU2F2ZSB0aGUgbWVzc2FnZSB0byB0aGUgZGF0YWJhc2UKCSovCglzYXZlKGRiKSB7CgkgIGRiLnB1dCh0aGlzLnRvSlNPTigpKQoJCQkudGhlbihlID0+IHRoaXMuX3JldiA9IGUucmV2KQoJCQkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTsKICB9CgogIC8qKgoJKiBEZWxldGVzIHRoZSBtZXNzYWdlCgkqKi8KCXJlbW92ZShkYikgewoJCXRoaXMuX2RlbGV0ZWQgPSB0cnVlOwoJCXRoaXMuc2F2ZShkYik7Cgl9CgoJLyoqCgkqIFVwZGF0ZXMgdGhlIG1lc3NhZ2Ugd2l0aCBuZXcgZGF0YQoJKiovCgl1cGRhdGUoZGIsIHtsaWtlZEJ5LCBfcmV2LCBfY29uZmxpY3RzID0gW119KSB7CgkJLy8gT25seSBsaWtlZEJ5IGlzIGFsbG93ZWQgdG8gYmUgdXBkYXRlZAoJCWZvciAobGV0IHUgb2YgbGlrZWRCeSkgewoJCQl0aGlzLmxpa2UodSk7CgkJfQoJCWlmIChfY29uZmxpY3RzLmxlbmd0aCA+IDApIHsKCQkJY29uc3QgbGlrZXMgPSB0aGlzLmxpa2VzOwoJCQl0aGlzLnJlc29sdmVDb25mbGljdHMoZGIsIF9jb25mbGljdHMpCgkJCQkudGhlbigoKSA9PiB0aGlzLmxpa2VzICE9PSBsaWtlcyAmJiB0aGlzLnNhdmUoZGIpKTsKCQl9CgkJdGhpcy5fcmV2ID0gX3JldjsgLy8gVXBkYXRlIG91ciByZXZpc2lvbgoJfQoKICAvKioKCSogU29sdmUgY29uZmxpY3RzIGJldHdlZW4gbWVzc2FnZXMKCSogKGJ5IG1lcmdpbmcgbGlrZWRCeSBiZXR3ZWVuIGRpZmZlcmVudCBtZXNzYWdlcykKCSoqLwoJcmVzb2x2ZUNvbmZsaWN0cyhkYiwgY29uZmxpY3RzKSB7CgkJY29uc3QgZG9jUHJvbWlzZXMgPSBjb25mbGljdHMubWFwKF9yZXYgPT4gZGIuZ2V0KHRoaXMuX2lkLCB7cmV2OiBfcmV2fSkpOwoJCXJldHVybiBQcm9taXNlLmFsbChkb2NQcm9taXNlcykudGhlbihkb2NzID0+IGRvY3MuZm9yRWFjaChkb2MgPT4gdGhpcy51cGRhdGUoZGIsIGRvYykpKTsKCX0KCgkvKioKCSogQ3JlYXRlIGEgbWVzc2FnZSBmcm9tIHRoZSBjdXJyZW50IHVzZXIKCSoqLwoJc3RhdGljIGNyZWF0ZSh1c2VybmFtZSwgdGV4dCkgewoJCXJldHVybiBuZXcgTWVzc2FnZSh7CgkgICAgZGF0ZTogRGF0ZS5ub3coKSwKCQkJYXV0aG9yOiB1c2VybmFtZSwKCQkJdGV4dDogdGV4dAoJCX0pOwoJfQp9CgpjbGFzcyBNZXNzYWdlcyB7Cgljb25zdHJ1Y3RvcigpIHsKCQl0aGlzLmxpc3QgPSBbXTsKCQl0aGlzLnVzZXJuYW1lID0gIkFub255bW91cyAiICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMDApOwoJCXRoaXMuZGIgPSBuZXcgREI7CgkJdGhpcy5kYi5zeW5jKCk7CgkJdGhpcy5mZXRjaEFsbCgpOwoJCXRoaXMuZGIuY2hhbmdlcyh7CgkJCXNpbmNlOiAnbm93JywKCQkJbGl2ZTogJ3RydWUnLAoJCQlpbmNsdWRlX2RvY3M6IHRydWUsCgkJCWNvbmZsaWN0czogdHJ1ZQoJCX0pLm9uKCdjaGFuZ2UnLCBlID0+IHRoaXMuaGFuZGxlRXZlbnQoZSkpCgl9CgoJc2V0VXNlck5hbWUodSkgewoJCXRoaXMudXNlcm5hbWUgPSB1OwoJfQoKCWZpbmQgKG1zZykgewoJCWNvbnN0IHJlcyA9IHRoaXMubGlzdC5maW5kKG0gPT4gbS5faWQgPT09IG1zZy5faWQpOwoJCWlmIChyZXMgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCJObyBzdWNoIG1lc3NhZ2UiKTsKCQlyZXR1cm4gcmVzOwogIH0KCQoJaGFuZGxlRXZlbnQoZSkgewoJICBpZiAoIWUgfHwgIWUuZG9jIHx8IGUuZG9jLnR5cGUgIT09ICdtZXNzYWdlJykgcmV0dXJuOwoJCWlmIChlLmRlbGV0ZWQpIHsKCQkJdGhpcy5yZW1vdmVGcm9tTGlzdChlLmlkKTsKCQl9IGVsc2UgewoJCQl0aGlzLmFkZFRvTGlzdChlLmRvYyk7CgkJfQoJCS8vIFJlZnJlc2ggdGhlIHZ1ZQoJCWFwcC5tZXNzYWdlcyA9IHRoaXMudG9KU09OKCk7CiAgfQoKCWNyZWF0ZU1lc3NhZ2UodHh0KSB7CgkJdmFyIG1zZyA9IE1lc3NhZ2UuY3JlYXRlKHRoaXMudXNlcm5hbWUsIHR4dCk7CgkJbXNnLnNhdmUodGhpcy5kYik7Cgl9CgoJLyoqCgkqIFRha2VzIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIG1lc3NhZ2UgYW5kIGluc2VydCBpdAoJKiBAcGFyYW0gbXNnIHtPYmplY3R9IHRoZSBtZXNzYWdlIGRhdGEKCSoqLwoJYWRkVG9MaXN0KGRvYykgewoJCS8vIEZpbmQgdGhlIHBvc2l0aW9uIHRvIGluc2VydCB0aGUgbWVzc2FnZQoJCWNvbnN0IGkgPSB0aGlzLmxpc3QuZmluZEluZGV4KG8gPT4gby5faWQgPj0gZG9jLl9pZCk7CgkJaWYgKGkgPT09IC0xKSB7CgkJCS8vIEFsbCBleGlzdGluZyBtZXNzYWdlcyBhcmUgb2xkZXIgdGhhbiB0aGUgbmV3IG9uZQoJCQl0aGlzLmxpc3QucHVzaChuZXcgTWVzc2FnZShkb2MpKTsKCQl9IGVsc2UgaWYgKHRoaXMubGlzdFtpXS5faWQgIT09IGRvYy5faWQpIHsKCQkJLy8gVGhlcmUgYXJlIG1lc3NhZ2VzIG5ld2VyIHRoYW4gdGhlIG5ldyBvbmUKCQkJdGhpcy5saXN0LnNwbGljZShpLCAwLCBuZXcgTWVzc2FnZShkb2MpKTsKCQl9IGVsc2UgewoJCQkvLyBUaGUgbWVzc2FnZSBleGlzdHMgYW5kIHdhcyB1cGRhdGVkCgkJCWxldCBtc2cgPSB0aGlzLmxpc3RbaV07CgkJCW1zZy51cGRhdGUodGhpcy5kYiwgZG9jKTsKCQl9Cgl9CgoJcmVtb3ZlRnJvbUxpc3QobXNnSWQpIHsKCQl0aGlzLmxpc3QgPSB0aGlzLmxpc3QuZmlsdGVyKG8gPT4gby5faWQgIT09IG1zZ0lkKTsKCX0KCglmZXRjaEFsbCgpIHsKCQl0aGlzLmRiLmFsbERvY3MoewoJCQlpbmNsdWRlX2RvY3M6IHRydWUsCgkJCWNvbmZsaWN0czogdHJ1ZSwKCQkJc3RhcnRrZXk6ICdtZXNzYWdlJywKCQkJZW5ka2V5OiAnbWVzc2FnZVx1ZmZmZicKCQl9KS50aGVuKG8gPT4gby5yb3dzLmZvckVhY2goZSA9PiB0aGlzLmhhbmRsZUV2ZW50KGUpKSk7Cgl9CgogIGRlbGV0ZU1lc3NhZ2UobXNnKSB7CgkJdGhpcy5maW5kKG1zZykucmVtb3ZlKHRoaXMuZGIpOwoJfQoKICBsaWtlTWVzc2FnZShtc2dKU09OKSB7CgkJbGV0IG1zZyA9IHRoaXMuZmluZChtc2dKU09OKTsKCQltc2cubGlrZSh0aGlzLnVzZXJuYW1lKTsKCQltc2cuc2F2ZSh0aGlzLmRiKTsKCX0KCgl0b0pTT04oKSB7CgkJcmV0dXJuIHRoaXMubGlzdC5tYXAobyA9PiBvLnRvSlNPTigpKTsKCX0KfQpjb25zdCBtZXNzYWdlcyA9IG5ldyBNZXNzYWdlczsKCnZhciBhcHAgPSBuZXcgVnVlKHsKICBlbDogJyNhcHAnLAoJZGF0YTogewoJCW1lc3NhZ2VzOiBbXSwKCQljdXJyZW50X3RleHQ6ICIiLAoJCXNob3dfb3B0aW9uczogZmFsc2UsCgl9LAoJbWV0aG9kczogewoJCXNlbmQoKSB7CgkJCW1lc3NhZ2VzLmNyZWF0ZU1lc3NhZ2UodGhpcy5jdXJyZW50X3RleHQpOwoJCQl0aGlzLmN1cnJlbnRfdGV4dCA9ICIiOwoJCX0sCgkJZGVsZXRlTWVzc2FnZShtc2cpIHsKCQkJbWVzc2FnZXMuZGVsZXRlTWVzc2FnZShtc2cpOwoJCX0sCgkJbGlrZU1lc3NhZ2UobXNnKSB7CgkJCW1lc3NhZ2VzLmxpa2VNZXNzYWdlKG1zZyk7CgkJfSwKCQlzZXRVc2VyTmFtZSA6IGUgPT4gbWVzc2FnZXMuc2V0VXNlck5hbWUoZS50YXJnZXQudmFsdWUpLAoJCWdldFVzZXJOYW1lIDogKCkgPT4gbWVzc2FnZXMudXNlcm5hbWUsCQkKCX0sCgl1cGRhdGVkKGUpIHsKICAJdmFyIGRvbV9lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tZXNzYWdlcyIpOwoJCWRvbV9lbC5zY3JvbGxUb3AgPSBkb21fZWwuc2Nyb2xsSGVpZ2h0OwoJfQp9KTsKCgoKCg=="
    }
  }
}